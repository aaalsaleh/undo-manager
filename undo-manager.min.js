/*! The MIT License (c) 2015 Abdulrahman Alsaleh */
!function(c){"undefined"!=typeof module&&(module.exports=c());"function"==typeof define&&define.amd&&define("undo-manager",c);"undefined"!=typeof window&&(window.UndoManager=c())}(function(){return function(c,d){var a=[],e="undefined"!=typeof CustomEvent&&d&&d.dispatchEvent;this.length=this.position=0;this.transact=function(b,f){if(2>arguments.length)throw new TypeError("Not enough arguments to UndoManager.transact.");b.execute();a.splice(0,this.position);f&&this.length?a[0].push(b):a.unshift([b]);
this.position=0;this.length=c&&a.length>c?a.length=c:a.length;e&&d.dispatchEvent(new CustomEvent("DOMTransaction",{detail:{transactions:a[0].slice()},bubbles:!0,cancelable:!1}))};this.undo=function(){if(this.position<this.length){for(var b=a[this.position].length-1;0<=b;b--)a[this.position][b].undo();this.position++;e&&d.dispatchEvent(new CustomEvent("undo",{detail:{transactions:a[this.position-1].slice()},bubbles:!0,cancelable:!1}))}};this.redo=function(){if(0<this.position){for(var b=0,c=a[this.position-
1].length;b<c;b++)a[this.position-1][b].redo();this.position--;e&&d.dispatchEvent(new CustomEvent("redo",{detail:{transactions:a[this.position].slice()},bubbles:!0,cancelable:!1}))}};this.item=function(b){return 0<=b&&b<this.length?a[b].slice():null};this.clearUndo=function(){a.length=this.length=this.position};this.clearRedo=function(){a.splice(0,this.position);this.position=0;this.length=a.length}}});
